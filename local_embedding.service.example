[Unit]
Description=Local text embedding and re-ranking â€“ Gunicorn-wrapped Uvicorn server
After=network.target

[Service]
WorkingDirectory=/path/to/working/directory/local_embedding

ExecStart=/path/to/working/directory/local_embedding/.venv/bin/gunicorn local_embedding:app --workers 2 --worker-class uvicorn.workers.UvicornWorker --timeout 300 -b 127.0.0.1:8004

Restart=on-failure
RestartSec=5s
Environment=PYTHONUNBUFFERED=1
EnvironmentFile=/path/to/working/directory/local_embedding/.env
LogLevelMax=7
SyslogIdentifier=local_embedding

[Install]
WantedBy=default.target
